/* Modernizr 2.5.3 (Custom Build) | MIT & BSD */
;if(typeof $ == "undefined") $ = jQuery;
window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a)if(j[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var d="2.5.3",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),k.appendChild(j);return f=["&#173;","<style>",a,"</style>"].join(""),k.id=h,(l?k:m).innerHTML+=f,m.appendChild(k),l||(m.style.background="",g.appendChild(m)),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e});var G=function(a,c){var d=a.join(""),f=c.length;w(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d?d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"":"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.csstransforms3d=(i.csstransforms3d&&i.csstransforms3d.offsetLeft)===9&&i.csstransforms3d.offsetHeight===3},f,c)}([,["@media (",m.join("transform-3d),("),h,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"csstransforms3d"]);q.csstransforms=function(){return!!F("transform")},q.csstransforms3d=function(){var a=!!F("perspective");return a&&"webkitPerspective"in g.style&&(a=e.csstransforms3d),a};for(var H in q)y(q,H)&&(v=H.toLowerCase(),e[v]=q[H](),t.push((e[v]?"":"no-")+v));return z(""),i=k=null,function(a,b){function g(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function h(){var a=k.elements;return typeof a=="string"?a.split(" "):a}function i(a){var b={},c=a.createElement,e=a.createDocumentFragment,f=e();a.createElement=function(a){var e=(b[a]||(b[a]=c(a))).cloneNode();return k.shivMethods&&e.canHaveChildren&&!d.test(a)?f.appendChild(e):e},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+h().join().replace(/\w+/g,function(a){return b[a]=c(a),f.createElement(a),'c("'+a+'")'})+");return n}")(k,f)}function j(a){var b;return a.documentShived?a:(k.shivCSS&&!e&&(b=!!g(a,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),f||(b=!i(a)),b&&(a.documentShived=b),a)}var c=a.html5||{},d=/^<|^(?:button|form|map|select|textarea)$/i,e,f;(function(){var a=b.createElement("a");a.innerHTML="<xyz></xyz>",e="hidden"in a,f=a.childNodes.length==1||function(){try{b.createElement("a")}catch(a){return!0}var c=b.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()})();var k={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:j};a.html5=k,j(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return o.call(a)=="[object Function]"}function e(a){return typeof a=="string"}function f(){}function g(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function h(){var a=p.shift();q=1,a?a.t?m(function(){(a.t=="c"?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){a!="img"&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l={},o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};y[c]===1&&(r=1,y[c]=[],l=b.createElement(a)),a=="object"?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),a!="img"&&(r||y[c]===2?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i(b=="c"?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),p.length==1&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&o.call(a.opera)=="[object Opera]",l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return o.call(a)=="[object Array]"},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,i){var j=b(a),l=j.autoCallback;j.url.split(".").pop().split("?").shift(),j.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]||h),j.instead?j.instead(a,e,f,g,i):(y[j.url]?j.noexec=!0:y[j.url]=1,f.load(j.url,j.forceCSS||!j.forceJS&&"css"==j.url.split(".").pop().split("?").shift()?"c":c,j.noexec,j.attrs,j.timeout),(d(e)||d(l))&&f.load(function(){k(),e&&e(j.origUrl,i,g),l&&l(j.origUrl,i,g),y[j.url]=2})))}function i(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var j,l,m=this.yepnope.loader;if(e(a))g(a,0,m,0);else if(w(a))for(j=0;j<a.length;j++)l=a[j],e(l)?g(l,0,m,0):w(l)?B(l):Object(l)===l&&i(l,m);else Object(a)===a&&i(a,m)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
/* HASH */
(function(){var b={},h=0,f=!1,k=null,g=null,l=function(){k||(k=setInterval(function(){0<h&&g!=window.location.href&&(g=window.location.href,window.Hash.check())},100))};window.Hash=function(a){return Object.freeze?Object.freeze(a):a}({pushState:function(a){window.history&&window.history.pushState&&(f=a);return this},fragment:function(){var a=window.location.href.split("#");return f?window.location.pathname+(a[1]?"#"+a[1]:""):a[1]||""},get:function(a,c){var b,d=[];for(b in c)Object.prototype.hasOwnProperty(b)&& d.push(encodeURIComponent(b)+"="+encodeURIComponent(c[b]));0<d.length&&(d="?"+d.join("&"));return f?a+d:window.location.href.split("#")[0]+"#"+a+d},go:function(a,b){if(this.fragment()!=a){var e=this.get(a,b);f?window.history.pushState(null,document.title,e):window.location.href=e}return this},update:function(){g=window.location.href;return this},on:function(a,c,e){b[a]||(b[a]={title:e,listeners:[]});b[a].listeners.push(c);h++;l();return this},check:function(){var a,c,e,d=this.fragment();for(c in b)if(Object.prototype.hasOwnProperty.call(b, c))if(b[c].regexp=b[c].regexp||RegExp(c),e=b[c].regexp.exec(d))for(b[c].title&&(document.title=b[c].title),a=0;a<b[c].listeners.length;a++)b[c].listeners[a].yep&&b[c].listeners[a].yep(d,e);else for(a=0;a<b[c].listeners.length;a++)b[c].listeners[a].nop&&b[c].listeners[a].nop(d);return this}})})();
/* HTML5 Flipping Book v.1 */
function clickElement(e,t){if($.isTouch){e.bind($.mouseEvents.up,t)}else{$(e).on("click",t)}}function navigation(e){switch(e){case"table-contents":$(".flipbook").turn("page",$(".table-contents").attr("rel"));break;case"fa fa-facebook fa-lg":window.open("https://www.facebook.com/sharer.php?"+"u="+encodeURIComponent(rawPublicationLink)+"&t="+encodeURIComponent(rawPublicationTitle));break;case"fa fa-twitter fa-lg":window.open("https://twitter.com/intent/tweet?"+"original_referer="+encodeURIComponent(rawPublicationLink)+"&url="+encodeURIComponent(rawPublicationLink)+"&text="+encodeURIComponent(rawPublicationTitle));break;case"fa fa-pinterest fa-lg":window.open("http://pinterest.com/pin/create/button/?url="+"url="+encodeURIComponent(rawPublicationLink)+"&media="+encodeURIComponent(rawPublicationTitle));break;case"fa fa-google-plus fa-lg":window.open("https://plusone.google.com/_/+1/confirm?"+"url="+encodeURIComponent(rawPublicationLink));break}}function checkCloseBtn(){if(window.top!==window.self){$(".fa-times").hide()}}function turnPage(e){$("#jquery-live-search").slideUp(400);$(".flipbook").turn("page",e);if(isTablet){clickSearch=false;clickGoTo=false}$(".search-result").removeClass("current");$("#page-"+e).addClass("current");var t="";if(keyword!=""){t=keyword}else{t=$('#search-inp input[name="search"]').val()}$(".p"+(e-1)).children(".flipbook-page").highlight(t);$(".p"+e).children(".flipbook-page").highlight(t);$(".p"+(e+1)).children(".flipbook-page").highlight(t)}function Countdown(e){function o(){i(r);if(r===0){s();n.stop()}r--}var t,n=this,r=e.seconds||10,i=e.onUpdateStatus||function(){},s=e.onCounterEnd||function(){};this.start=function(){clearInterval(t);t=0;r=e.seconds;t=setInterval(o,1e3)};this.stop=function(){clearInterval(t)}}function resizeViewport(){var e=$(window).width(),t=$(window).height(),n=$(".flipbook").turn("options");$(".flipbook-viewport").css({width:e,height:t})}function setSliderMaxViews(e){numberOfViews=parseInt(e.turn("pages")%2==0?e.turn("pages")/2+1:(e.turn("pages")+1)/2);$("#slider").slider("option",{max:numberOfViews})}function getViewNumber(e,t){return parseInt((t||e.turn("page"))/2+1,10)}function moveBar(e){if(Modernizr&&Modernizr.csstransforms){$("#slider .ui-slider-handle").css({zIndex:e?-1:1e4})}}function setPreview(e){if(sliderThumbs){var t=114,n=73,r=$(".flipbook").turn("pages");s=$(_thumbPreview.children(":first"));if(r%2!=0)i=e==1?t/2:t;else i=e==1||e==$("#slider").slider("option","max")?t/2:t}else{var i=$("#slider").slider("option","max")>49?55:45,n=25,s=$(_thumbPreview.children(":first"))}_thumbPreview.addClass("no-transition").css({width:i+15,height:n+15,top:-n-30,left:($($("#slider").children(":first")).width()-i-15)/2});s.css({width:i,height:n});if(sliderThumbs){if(s.css("background-image")===""||s.css("background-image")=="none"){s.css({backgroundImage:"url("+previewSrc+")"});setTimeout(function(){_thumbPreview.removeClass("no-transition")},0)}s.css({backgroundPosition:"0px -"+(e-1)*n+"px"})}else{if(e==1){echopage=e}else if(e==$("#slider").slider("option","max")&&$(".flipbook").turn("pages")%2==0){echopage=e*2-1}else{echopage=e*2-2+"-"+(e*2-1)}s.html("<b>"+echopage+"</b>")}}function zoomOutButton(e){var t=$(".zoom-out");if(!t.length){var t=$("<i />",{"class":"tbicon zoom-out"}).insertAfter($("#mainFlipBookDiv")).mouseover(function(){t.addClass("zoom-out-hover")}).mouseout(function(){t.removeClass("zoom-out-hover")}).click(function(){var e=$(".flipbook").turn("page");var n=$(".flipbook").turn("pages");if(imgLink.hasOwnProperty(e)&&imgLink[e].hasOwnProperty("large")&&imgLink[e].hasOwnProperty("small")&&(e==n||imgLink.hasOwnProperty(e+1)&&imgLink[e+1].hasOwnProperty("large")&&imgLink[e+1].hasOwnProperty("small"))){$("#mainFlipBookDiv").zoom("zoomOut")}else{zoomOutText()}t.hide()})}$("#emailModal").hide();$(".html5fb-overlay").hide();t.css({display:e?"":"none"})}function loadLargePage(e,t,n){var r=$("<img />");r.load(function(){var e=t.find("img");$(this).css({width:"100%",height:"100%"});$(this).appendTo(t);e.remove()});r.attr("src",n)}function loadSmallPage(e,t,n){var r=t.find("img");r.css({width:"100%",height:"100%"});r.unbind("load");r.attr("src",n)}function zoomTo(e){var t=$(".flipbook").turn("page");var n=$(".flipbook").turn("pages");if(imgLink.hasOwnProperty(t)&&imgLink[t].hasOwnProperty("large")&&imgLink[t].hasOwnProperty("small")&&(t==n||imgLink.hasOwnProperty(t+1)&&imgLink[t+1].hasOwnProperty("large")&&imgLink[t+1].hasOwnProperty("small"))&&!isHard){if($(this).zoom("value")==1){$(this).zoom("zoomIn",e)}else{$(this).zoom("zoomOut")}}else{if($(".flipbook").data().zoomIn)zoomOutText();else if(e.target){zoomInText(e,false)}}}function point2D(e,t){return{x:e,y:t}}function zoomInText(e,t){var n,r=0,i=1/2.4,s=$(e.target),o=$("#mainFlipBookDiv"),u=$(".flipbook"),a=u.turn("direction"),f=u.offset(),l=s.offset(),c={height:u.height()},h=u.turn("view");if(!h[0]){c.width=u.width()/2;r=a=="ltr"?c.width:0;n=point2D(a=="ltr"?f.left-l.left+c.width:f.left-l.left,f.top-l.top)}else if(!h[1]){c.width=u.width()/2;r=a=="ltr"?0:c.width;n=point2D(a=="ltr"?f.left-l.left:f.left-l.left+c.width,f.top-l.top)}else{c.width=u.width();n=point2D(f.left-l.left,f.top-l.top)}var p={pos:n,size:c};var n=p.pos,d=2.4,v=point2D(p.size.width/2,p.size.height/2),m=$.cssTransitionEnd(),g=u.data().opts.autoCenter,y=function(){o.unbind(m);if(u.data().zoomIn){$("body").css({overflow:"visible"})}};u.data().noCenter=true;if(typeof e!="undefined"){if("x"in e&&"y"in e){pos=point2D(e.x-n.x,e.y-n.y)}else{pos=$.isTouch?point2D(e.originalEvent.touches[0].pageX-n.x-l.left,e.originalEvent.touches[0].pageY-n.y-l.top):point2D(e.pageX-n.x-l.left,e.pageY-n.y-l.top)}}else{pos=point2D(v.x,v.y)}if(pos.x<0||pos.y<0||pos.x>p.width||pos.y>p.height){pos.x=v.x;pos.y=v.y}var b=point2D((pos.x-v.x)*d+v.x,(pos.y-v.y)*d+v.y),w=point2D(p.size.width*d>s.width()?pos.x-b.x:0,p.size.height*d>s.height()?pos.y-b.y:0),E=point2D(Math.abs(p.size.width*d-s.width()),Math.abs(p.size.height*d-s.height())),S=point2D(Math.min(0,p.size.width*d-s.width()),Math.min(0,p.size.height*d-s.height())),x=point2D(v.x*d-v.x-n.x-w.x,v.y*d-v.y-n.y-w.y);if(x.y>E.y)w.y=x.y-E.y+w.y;else if(x.y<S.y)w.y=x.y-S.y+w.y;if(x.x>E.x){w.x=x.x-E.x+w.x}else if(x.x<S.x){w.x=x.x-S.x+w.x}x=point2D(v.x*d-v.x-n.x-w.x,v.y*d-v.y-n.y-w.y);if(t){$("#zoom-viewport").css("margin",0);o.css({width:E.x,height:E.y});w={x:-E.x/2,y:-E.y/2}}u.data().zoomIn=true;u.turn("disable",true);$(window).resize(zoomOutText);$("#slider-bar, #page-bar, .fb_topBar").hide();o.css({overflow:"visible"});var T="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style;o.transform(T?"translate3d("+w.x+"px,"+w.y+"px, 0px) scale3d("+d+", "+d+", 1)":" translate("+w.x+"px, "+w.y+"px) scale("+d+")");zoomOutButton(true);if(m){o.bind(m,y)}else{setTimeout(y,1e3)}}function zoomOutText(){var e=$.cssTransitionEnd(),t=function(t){$("#mainFlipBookDiv").unbind(e);$(".flipbook").turn("disable",false);$("body").css({overflow:"hidden"});moveBar(false)};$(".flipbook").data().zoomIn=false;$(window).unbind("resize",zoomOutText);moveBar(true);$("#mainFlipBookDiv").transform("scale(1)");$("#slider-bar, #page-bar, .fb_topBar").show();if(e){if($("#zoom-viewport").attr("style")){$("#zoom-viewport").removeAttr("style")}$("#mainFlipBookDiv").css({overflow:"hidden",width:"auto",height:"auto"}).bind(e,t);zoomOutButton(false);resizeViewport()}else{setTimeout(t,1e3)}}function calculateBound(e){var t={width:e.width,height:e.height};if(t.width>e.boundWidth||t.height>e.boundHeight){var n=t.width/t.height;if(e.boundWidth/n>e.boundHeight&&e.boundHeight*n<=e.boundWidth){t.width=Math.round(e.boundHeight*n);t.height=e.boundHeight}else{t.width=e.boundWidth;t.height=Math.round(e.boundWidth/n)}}return t}function resizeViewport_Tablet(){var e=$(window).width(),t=$(window).height(),n=$(".flipbook").turn("options");$(".flipbook").removeClass("animated");$("#mainFlipBookDiv").css({width:e,height:t}).zoom("resize");if($(".flipbook").turn("zoom")==1){var r=calculateBound({width:n.width,height:n.height,boundWidth:Math.min(n.width,e),boundHeight:Math.min(n.height,t)});if(r.width%2!==0)r.width-=1;if(r.width!=$(".flipbook").width()||r.height!=$(".flipbook").height()){$(".flipbook").turn("size",r.width,r.height);if($(".flipbook").turn("page")==1)$(".flipbook").turn("peel","br")}if(isHard){var i=false;$(".flipbook").on("end",function(e,t,n){if(n){resizeHardBookPage(r);i=true}});if(!i){resizeHardBookPage(r)}}$(".flipbook").css({top:-r.height/2,left:-r.width/2});var s=$("#page-bar").outerWidth(true);$("#slider-bar").css({left:s<100?160:s+50,maxWidth:$(".tablet-bottomBar").width()-$("#page-bar").outerWidth(true)-80})}$(".flipbook").addClass("animated")}function resizeHardBookPage(e){var t=1919;var n=$(".flipbook").width()/2;var r=480/n;var i=parseInt(1919/r);var s=parseInt($(".flipbook").turn("pages"));$(".p1").css({backgroundSize:i+"px "+e.height+"px"});$(".p2").css({backgroundSize:i+"px "+e.height+"px",backgroundPosition:-n+"px 0"});$(".p"+s).css({backgroundSize:i+"px "+e.height+"px",backgroundPosition:-(n*3)+"px 0"});$(".p"+(s-1)).css({backgroundSize:i+"px "+e.height+"px",backgroundPosition:-(n*2)+"px 0"});var o=n/1.043;var u=e.height/1.031;$(".page:not(.hard)").parent().parent().css({top:9,width:o,height:u});$(".page:not(.hard)").parent().next().css({width:o,height:u});$(".page:not(.hard, .odd)").css({width:o,height:u}).parent().parent().css({left:n-o,right:"auto"});$(".page:not(.hard, .even)").css({width:o,height:u}).parent().parent().css({right:n-o,left:"auto"});$(".flipbook-page").css({width:o-80,height:u-80,overflow:"hidden"});$(".depth").css("background-size","auto "+e.height/1.017+"px")}function fbTurningPage(t,n,r,i,s,o){if(n==1){if(!o){$("#slider-bar").css("left",i+"px")}$("#fb_bookname").hide();$("#search-inp").hide();$("#page-bar").hide();$(".tb_social").css({"float":"right","margin-left":"0"})}else{if(n!=r){if(!o){$("#slider-bar").css("left",s+"px")}$("#fb_bookname").show();$("#search-inp").show();$("#page-bar").show();$(".tb_social").css({"float":"right","margin-left":"0"})}else{if(!o){$("#slider-bar").css("left","-80px")}$("#fb_bookname").hide();$("#search-inp").hide();$("#page-bar").hide();$(".tb_social").css({"float":"left","margin-left":"200px"})}}if(isHard){if(n>3&&n<r-3){if(n==1){t.turn("page",2).turn("stop").turn("page",n);e.preventDefault();return}else if(n==r){t.turn("page",r-1).turn("stop").turn("page",n);e.preventDefault();return}}else if(n>3&&n<r-3){if(currentPage==1){t.turn("page",2).turn("stop").turn("page",n);e.preventDefault();return}else if(currentPage==r){t.turn("page",r-1).turn("stop").turn("page",n);e.preventDefault();return}}updateDepth(t,n);if(n>=2){$(".flipbook .p2").addClass("fixed")}else{$(".flipbook .p2").removeClass("fixed")}if(n<t.turn("pages")){$(".flipbook .p"+(r-1)).addClass("fixed")}else{$(".flipbook .p"+(r-1)).removeClass("fixed")}}}function addPage(e,t){var n,r=t.turn("pages");var i=$("<div />",{"class":"own-size",css:{width:460,height:582}}).html('<div class="loader"></div>')}function updateDepth(e,t){var n=e.turn("page"),r=e.turn("pages"),i=Math.round(16*Math.min(1,n*2/r));t=t||n;if(t>3){$(".flipbook .p2 .depth").css({width:i,left:20-i})}else{$(".flipbook .p2 .depth").css({width:0})}i=Math.round(16*Math.min(1,(r-n)*2/r));if(t<r-3){$(".flipbook .p"+(r-1)+" .depth").css({width:i,right:20-i})}else{$(".flipbook .p"+(r-1)+" .depth").css({width:0})}}function isChrome(){return navigator.userAgent.indexOf("Chrome/19")!=-1||navigator.userAgent.indexOf("Chrome/20")!=-1}(function(e){e.getQuery=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)";var n=new RegExp(t);var r=n.exec(window.location.href);if(r!==null){return r[1];return decodeURIComponent(r[1].replace(/\+/g," "))}else{return false}}})(jQuery);$(window).load(function(){$(".load-overlay").fadeOut(1e3)});if(screenfull.enabled){document.addEventListener(screenfull.raw.fullscreenchange,function(){if(screenfull.isFullscreen&&isTablet){resizeViewport_Tablet()}})}
$(document).ready(function(){
	if(!(/iPad/.test(navigator.userAgent))){
		screenfull.request(document.getElementById("mainFlipBookDiv"));
	}
	$(".fa-search-plus").on("click",function(e){var t=$(".flipbook").turn("page");var n=$(".flipbook").turn("pages");if(imgLink.hasOwnProperty(t)&&imgLink[t].hasOwnProperty("large")&&imgLink[t].hasOwnProperty("small")&&(t==n||imgLink.hasOwnProperty(t+1)&&imgLink[t+1].hasOwnProperty("large")&&imgLink[t+1].hasOwnProperty("small"))){$("#mainFlipBookDiv").zoom("zoomIn")}else{if($(".flipbook").data().zoomIn){zoomOutText()}else{zoomInText(e,true)}}});$(".fa-expand").click(function(){if(isModal==3&&$.getQuery("fullscreen")!=1){if(window.location.href.indexOf("?") != "-1"){var e=window.open(window.location.href+"&fullscreen=1");} else {var e=window.open(window.location.href+"?fullscreen=1");}window.opener=null;e.focus();return}if(screenfull){screenfull.request(document.getElementById("mainFlipBookDiv"))}});if($.getQuery("fullscreen")==1){alert('If you want to enable fullscreen mode, please press on "Fullscreen" button')}if(screenfull.enabled){document.addEventListener(screenfull.raw.fullscreenchange,function(){if(screenfull.isFullscreen){resizeViewport()}else if(isModal==1){location.reload()}})}if(user){var e=new Countdown({seconds:90,onCounterEnd:function(){$.ajax({type:"POST",url:"index.php?option=com_html5flippingbook&task=userPublAction&tmpl=component",data:"pubID="+publicationID+"&action=updateSpendTime&sec=90",dataType:"JSON",success:function(){e.start()}})}});e.start();$.ajax({type:"POST",url:"index.php?option=com_html5flippingbook&task=userPublAction&tmpl=component",data:"pubID="+publicationID+"&action=lastopen",dataType:"JSON"})}checkCloseBtn();$("#goto_page_input").on("keyup",function(e){if(e.which==13){$("#goto_page_input_button").click()}});clickElement($(".fa"),function(e){navigation($.trim($(this).attr("class")))});if($('#search-inp input[name="search"]').length){var t=$('#search-inp input[name="search"]').val();$('#search-inp input[name="search"]').liveSearch({url:"index.php?option=com_html5flippingbook&task=search&tmpl=component"+"&id="+publicationID+(isHard?"&hard=1":"&hard=0")+"&text="+t})}$(document).keydown(function(e){switch(e.keyCode){case 37:$(".flipbook").turn("previous");return false;break;case 39:$(".flipbook").turn("next");return false;break}});$("#slider").slider({min:1,start:function(e,t){if(!window._thumbPreview){_thumbPreview=$("<div />",{"class":"thumbnail"}).html("<div></div>");setPreview(t.value);_thumbPreview.appendTo($(t.handle))}else setPreview(t.value);moveBar(false)},slide:function(e,t){setPreview(t.value)},stop:function(){if(window._thumbPreview)_thumbPreview.removeClass("show");$(".flipbook").turn("page",Math.max(1,$(this).slider("value")*2-2))}})})
