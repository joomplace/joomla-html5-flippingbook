function userPublAction(e,t){var n=["reading","reading_remove","favorite","favorite_remove","read","read_remove"];var r=["fa-list","fa-trash-o","fa-star","fa-trash-o","fa-eye-slash","fa-eye"];var i=[Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_READING_TIP"),Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_REMOVE_READING"),Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_FAVORITE_TIP"),Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_REMOVE_FAVORITE"),Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_READ_TIP"),Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_REMOVE_READ")];if(jQuery.inArray(t,n)!=-1){if(!user){alert(Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_ERROR_USER"));return}jQuery("#loader-"+e).show();jQuery.ajax({type:"POST",url:"index.php?option=com_html5flippingbook&task=userPublAction&tmpl=component",data:"pubID="+e+"&action="+t+(t=="favorite"?"&favorite=1":t=="read"?"&read=1":""),dataType:"JSON",success:function(s){jQuery("#loader-"+e).hide();if(!s.error){var o=t.split("_")[0];var u=jQuery.inArray(t,n);if(t=="read"||t=="favorite"||t=="reading"){jQuery("a#"+o+"_"+e).attr("onclick","userPublAction("+e+", '"+o+"_remove'); return false;");jQuery("a#"+o+"_"+e+" > i."+r[u]).removeClass(r[u]).addClass(r[u+1]);jQuery("a#"+o+"_"+e+" > #"+o+"_text_"+e).text(i[u+1])}else if(t=="read_remove"||t=="favorite_remove"||t=="reading_remove"){jQuery("a#"+o+"_"+e).attr("onclick","userPublAction("+e+", '"+o+"'); return false;");jQuery("a#"+o+"_"+e+" > i."+r[u]).removeClass(r[u]).addClass(r[u-1]);jQuery("a#"+o+"_"+e+" > #"+o+"_text_"+e).text(i[u-1])}}else{alert(s.message);return false}}})}else{alert(Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_ERROR_ACTION"));return false}}