(function(a){a(function(){var k=false;var b="reading";var f="",o="",d=0;a('a[data-toggle="tab"]').on("shown",function(t){a.cookie("last_tab",a(t.target).attr("href"));b=a(t.target).attr("href").split("_")[1];k=false;if(f.length>1){for(var s=1;s<f.length;s++){a(f[s]).css("left",-1*d+"px")}for(var r=1;r<o.length;r++){a(o[r]).css("left",-1*d+"px")}}});var c=a.cookie("last_tab");if(c){a("ul.nav-tabs").children().removeClass("active");a("a[href="+c+"]").parents("li:first").addClass("active");a("div.tab-content").children().removeClass("active");a(c).addClass("active");b=c.split("_")[1]}else{a("#viewTabs a:first").tab("show")}f=a("#tab_"+b+" .row-1 .loc");o=a("#tab_"+b+" .row-2 .loc");d=parseInt(f.actual("width"));var q=f.first();var p=o.first();var n=f.last();var m=o.last();if(f.length>1){for(var g=1;g<f.length;g++){a(f[g]).css("left",-1*d+"px")}for(var e=1;e<o.length;e++){a(o[e]).css("left",-1*d+"px")}a("#tab_"+b+" .slide-navi").show();a(".htmlfb5-sl-next").on("click",function(){q.animate({left:d},200,function(){n.animate({left:0},200,function(){q.before(n);q=a("#tab_"+b+" .row-1 .loc:first");n=a("#tab_"+b+" .row-1 .loc:last");n.css("left",-1*d)})});p.animate({left:d},200,function(){m.animate({left:0},200,function(){p.before(m);p=a("#tab_"+b+" .row-2 .loc:first");m=a("#tab_"+b+" .row-2 .loc:last");m.css("left",-1*d)})})});a(".htmlfb5-sl-prev").on("click",function(){q.animate({left:-1*d},200,function(){n.after(q);q=a("#tab_"+b+" .row-1 .loc:first");n=a("#tab_"+b+" .row-1 .loc:last");q.css("left",d).animate({left:0},200)});p.animate({left:-1*d},200,function(){m.after(p);p=a("#tab_"+b+" .row-2 .loc:first");m=a("#tab_"+b+" .row-2 .loc:last");p.css("left",d).animate({left:0},200)})})}var h=3;var l=3;a(window).scroll(function(){if(a(window).scrollTop()>=a(".html5fb-profile").height()-a(window).height()&&!k){a(".content-loading").show();a.ajax({url:"index.php?option=com_html5flippingbook&task=getAjaxContent&tmpl=component",method:"POST",data:{start:(b=="reading"?h:l),list:b},dataType:"HTML",beforeSend:function(){k=true}}).done(function(i){if(i.length>0){a("#"+b+"-list").append(i);k=false;if(b=="reading"){h+=3}else{l+=3}}else{a.ajax({url:"index.php?option=com_html5flippingbook&task=getAjaxContent&tmpl=component",method:"POST",data:{start:0,list:b}})}a(".content-loading").hide()})}});a(document).on({mouseenter:function(){a(this).find(".html5fb-top").fadeIn("fast")},mouseleave:function(){a(this).find(".html5fb-top").fadeOut("fast")}},".html5fb-list-item");a('a[href="#tab_reading"], a[href="#tab_favorite"]').on("click",function(){var i=a(this);var j=a(i.attr("href")+" > div.bookshelf").hasClass("active");var r=a("#"+i.attr("href").split("_")[1]+"-list").hasClass("active");if(j){a("#list").removeClass("active");a("#bookshelf").removeClass("active").addClass("active");k=true}else{if(r){a("#bookshelf").removeClass("active");a("#list").removeClass("active").addClass("active");k=false}}});a("#read-publ").on("click",function(){var i=a("#viewTabs > li.active > a").attr("href");var j=a(this);a("#"+i.split("_")[1]+"-alert").hide();a("ul#"+i.split("_")[1]+"-list > li").toggle().toggleClass("hide-publ");if(!a("ul#"+i.split("_")[1]+"-list > li:not(.hide-publ)").length){a("#"+i.split("_")[1]+"-alert").show()}if(j.hasClass("active")){j.removeClass("active");j.attr("data-original-title",Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_DISPLAY_READ_PUBL"));j.find("i.fa-eye").removeClass("fa-eye").addClass("fa-eye-slash")}else{j.addClass("active");j.attr("data-original-title",Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_DISPLAY_UNREAD_PUBL"));j.find("i.fa-eye-slash").removeClass("fa-eye-slash").addClass("fa-eye")}});a("#list, #bookshelf").on("click",function(){var i=a("#viewTabs > li.active > a").attr("href");a(this).addClass("active");a("#"+(this.id=="list"?"bookshelf":(this.id=="bookshelf"?"list":""))).removeClass("active");if(this.id=="list"){a("#"+i.split("_")[1]+"-list").addClass("active").show();a(i+" > div.bookshelf").removeClass("active").hide();k=false}else{if(this.id=="bookshelf"){a("#"+i.split("_")[1]+"-list").removeClass("active").hide();a(i+" > div.bookshelf").addClass("active").show();k=true}}});a("#jomshareModal").on("show",function(){a("#jomshareModal .button-block").show();var j=a('#jomshareModal input[name="publID"]').val();var s=a(".pub-"+j);var r=jQuery.trim(jQuery(s.find("a")[0]).text());if(!r){r=s.attr("alt")}var i="Dear Friend!\r\n\r\nCheck out the link below:\r\n"+liveSite+"index.php?option=com_html5flippingbook&view=publication&id="+j+"&tmpl=component";a("#jomshareModal .form-horizontal #subject").val(r);a("#jomshareModal .form-horizontal #body").val(i);a("#jomshareModal .form-horizontal").hide()})})})(jQuery);function shareAjaxAction(c){var b="";var a=parseInt(jQuery('#jomshareModal input[name="publID"]').val());if(!a){alert(Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_JSSHARE_PUB_ERROR"));return false}if(c=="sendprivate"){if(jQuery("#jomshareModal #friends").val()==-1){alert(Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_JSSHARE_FRIEND_ERROR"));return false}b={to:jQuery("#jomshareModal #friends").val(),subject:jQuery("#jomshareModal #subject").val(),body:jQuery("#jomshareModal #body").val()}}jQuery.ajax({type:"POST",url:liveSite+"index.php?option=com_html5flippingbook&task=jomShare&tmpl=component",data:{pubID:a,action:c,data:JSON.stringify(b)},dataType:"JSON",success:function(d){if(d.error==1){alert(d.message);return false}alert(d.message);jQuery("#jomshareModal").modal("hide");return true}});return true}function showPrivate(){jQuery("#jomshareModal .button-block").slideUp("fast",function(){jQuery("#jomshareModal .form-horizontal").slideDown("fast")})}function backToTop(){jQuery("html, body").animate({scrollTop:"0px"},800)}function userPublAction(e,d,b){var a=["reading","favorite","read","reading_remove","favorite_remove","read_remove","sendtofriend","share"];var c={reading:".icon-list-2",favorite:".icon-star",read:".icon-eye-blocked"};if(jQuery.inArray(d,a)!=-1){if(!user){alert(Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_ERROR_USER"));return false}if(d=="sendtofriend"){jQuery('#emailModal input[name="publID"]').val(e);jQuery("#emailModal").modal("show");return false}if(d=="share"){jQuery('#jomshareModal input[name="publID"]').val(e);jQuery("#jomshareModal").modal("show");return false}jQuery.ajax({type:"POST",url:liveSite+"index.php?option=com_html5flippingbook&task=userPublAction&tmpl=component",data:{pubID:e,action:d},dataType:"JSON",success:function(f){var g=jQuery("."+b+"-pub-"+e);if(!f.error){g.find(".list-overlay").addClass("done").fadeIn(150).delay(5).fadeOut(150,function(){if(d=="reading_remove"||d=="favorite_remove"){g.slideUp("fast").remove()}var j=null,h=0;if(d=="read"){g.addClass("hide-publ").hide();j=jQuery("a#read_"+e);for(h=0;h<j.length;h++){jQuery(j[h]).attr("onclick","userPublAction("+e+", 'read_remove', '"+b+"'); return false;")}jQuery("#read_"+e+" > i.fa-eye-slash").removeClass("fa-eye-slash").addClass("fa-eye");jQuery("#read_"+e+" > #text_"+e).text(Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_REMOVE_READ"))}else{if(d=="read_remove"){g.addClass("hide-publ").hide();j=jQuery("a#read_"+e);for(h=0;h<j.length;h++){jQuery(j[h]).attr("onclick","userPublAction("+e+", 'read', '"+b+"'); return false;")}jQuery("a#read_"+e+" > i.fa-eye").removeClass("fa-eye").addClass("fa-eye-slash");jQuery("a#read_"+e+" > #text_"+e).text(Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_READ_TIP"))}}if(!jQuery("ul#"+b+"-list > li:not(.hide-publ)").length){jQuery("#"+b+"-alert").show()}})}else{if(f.error==1){g.find(".list-overlay").addClass("error").fadeIn(150).delay(5).fadeOut(150,function(){alert(f.message)});return false}}return true}})}else{alert(Joomla.JText._("COM_HTML5FLIPPINGBOOK_FE_ACTION_ERROR_ACTION"));return false}return true};